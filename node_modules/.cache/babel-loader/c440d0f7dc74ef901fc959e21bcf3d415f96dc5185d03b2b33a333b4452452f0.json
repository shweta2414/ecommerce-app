{"ast":null,"code":"import { createSlice } from '@reduxjs/toolkit';\nconst initialState = {\n  products: [],\n  filteredProducts: [],\n  filters: {\n    category: null,\n    priceRange: [0, 1000]\n  },\n  cartProducts: []\n};\nconst productsSlice = createSlice({\n  name: 'productsSlice',\n  initialState: initialState,\n  reducers: {\n    setInitialState: (state, action) => {\n      state.products = action.payload;\n      state.filteredProducts = action.payload;\n    },\n    setFilters: (state, action) => {\n      state.filters.category = action.payload;\n    },\n    applyFilters: (state, action) => {\n      const {\n        category,\n        priceRange\n      } = state.filters;\n      if (category.length === 0) state.filteredProducts = state.products;else {\n        state.filteredProducts = state.products.filter(product => {\n          return category.includes(product.category.name);\n        });\n      }\n    },\n    addToCart: (state, action) => {\n      const product_id = action.payload;\n      const selectedProduct = state.cartProducts.find(product => {\n        return product.id === product_id;\n      });\n      if (selectedProduct) {\n        selectedProduct.quantity += 1;\n      } else {\n        const selectedProduct = state.filteredProducts.find(product => {\n          return product.id === product_id;\n        });\n        state.cartProducts.push({\n          ...selectedProduct,\n          quantity: 1\n        });\n      }\n    },\n    incrementQuantity: (state, action) => {\n      const product_id = action.payload;\n      const existingProduct = state.cartProducts.find(product => product.id === product_id);\n      if (existingProduct) existingProduct.quantity += 1;\n    },\n    decrementQuantity: (state, action) => {\n      const product_id = action.payload;\n      const existingProduct = state.cartProducts.find(product => product.id === product_id);\n      if (existingProduct.quantity === 1) {\n        state.cartProducts = state.cartProducts.filter(product => product.id !== product_id);\n      } else existingProduct.quantity -= 1;\n    },\n    removeProduct: (state, action) => {\n      const product_id = action.payload;\n      state.cartProducts = state.cartProducts.filter(product => product.id !== product_id);\n      // return state.cartProducts\n    }\n  }\n});\nexport const {\n  setInitialState,\n  setFilters,\n  applyFilters,\n  addToCart,\n  removeProduct,\n  incrementQuantity,\n  decrementQuantity\n} = productsSlice.actions;\nexport default productsSlice.reducer;","map":{"version":3,"names":["createSlice","initialState","products","filteredProducts","filters","category","priceRange","cartProducts","productsSlice","name","reducers","setInitialState","state","action","payload","setFilters","applyFilters","length","filter","product","includes","addToCart","product_id","selectedProduct","find","id","quantity","push","incrementQuantity","existingProduct","decrementQuantity","removeProduct","actions","reducer"],"sources":["/Users/shwetasharma/Documents/ecommerce-app/src/redux/productReducer.js"],"sourcesContent":["import { createSlice } from '@reduxjs/toolkit';\n\nconst initialState = {\n    products:[],\n    filteredProducts: [],\n    filters: {\n        category: null,\n        priceRange: [0, 1000],\n    },\n    cartProducts:[],\n}\nconst productsSlice = createSlice({\n    name: 'productsSlice',\n    initialState: initialState,\n    reducers: {\n        setInitialState: (state,action)=> {\n          state.products = action.payload;\n          state.filteredProducts = action.payload;\n        },\n        setFilters: (state,action)=> {\n            state.filters.category = action.payload;\n          },\n        applyFilters: (state,action)=> {\n            const {category, priceRange} = state.filters;\n            if(category.length === 0)\n                state.filteredProducts = state.products\n            else {\n                state.filteredProducts = state.products.filter(product=>{\n                    return category.includes(product.category.name)\n                   \n                })\n            }\n        },  \n        addToCart: (state,action) => {\n            const product_id = action.payload \n            const selectedProduct = state.cartProducts.find(product=> {\n               return product.id === product_id\n            })\n            if(selectedProduct){\n                selectedProduct.quantity +=1;\n            }\n              \n            else {\n                const selectedProduct = state.filteredProducts.find(product => {\n                   return product.id === product_id\n                })\n                state.cartProducts.push({ ...selectedProduct, quantity: 1 });\n            }\n\n        },\n        incrementQuantity: (state,action) => {\n                const product_id = action.payload;\n                const existingProduct = state.cartProducts.find(product => product.id === product_id)\n                if(existingProduct)\n                    existingProduct.quantity += 1;\n        },\n        decrementQuantity: (state,action) => {\n            const product_id = action.payload;\n            const existingProduct = state.cartProducts.find(product => product.id === product_id)\n            if( existingProduct.quantity === 1){\n                state.cartProducts = state.cartProducts.filter(product =>\n                    product.id !== product_id\n        \n                )\n            }\n            else\n                existingProduct.quantity -= 1;\n            \n    },\n        removeProduct: (state,action) => {\n            const product_id = action.payload;\n            state.cartProducts = state.cartProducts.filter(product =>\n                product.id !== product_id\n    \n            )\n            // return state.cartProducts\n        }\n    }\n})\nexport const { setInitialState,setFilters,applyFilters,addToCart,removeProduct,incrementQuantity,decrementQuantity } = productsSlice.actions;\nexport default productsSlice.reducer;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}